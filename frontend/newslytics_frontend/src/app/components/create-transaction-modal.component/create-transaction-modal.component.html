<div class="modal-overlay" (click)="onOverlayClick($event)">
    <div class="modal">
        <div class="modal-header">
            <h2>Transaktion hinzufügen</h2>
            <button class="close-btn" type="button" (click)="close.emit()">×</button>
        </div>

        <form (ngSubmit)="onSubmit()">
            <div class="transaction-info">
                <p class="info-text">
                    <strong>{{ stockName }}</strong> wird zu <strong>{{ portfolio.name }}</strong> hinzugefügt
                </p>
            </div>

            <label>
                Quantity (Menge)
                <input
                    type="number"
                    [(ngModel)]="menge"
                    name="menge"
                    min="0.0001"
                    step="0.0001"
                    required
                />
            </label>

            <label>
                Purchase Price (Kaufpreis)
                <input
                    type="number"
                    [(ngModel)]="kaufpreis"
                    name="kaufpreis"
                    min="0.0001"
                    step="0.01"
                    required
                />
            </label>

            <label>
                Purchase Date (Kaufdatum)
                <input
                    type="date"
                    [(ngModel)]="kaufdatum"
                    name="kaufdatum"
                    required
                />
            </label>

            @if (error) {
                <div class="error">{{ error }}</div>
            }

            <div class="form-actions">
                <button type="button" class="btn-secondary" (click)="close.emit()">
                    Abbrechen
                </button>
                <button type="submit" [disabled]="loading">
                    {{ loading ? 'Erstellen...' : 'Transaktion hinzufügen' }}
                </button>
            </div>
        </form>
    </div>
</div>
