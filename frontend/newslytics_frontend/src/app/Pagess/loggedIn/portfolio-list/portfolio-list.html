<section class="portfolio-list">
	<header>
		<h2>Meine Portfolios</h2>
		<button type="button" class="primary" (click)="openCreateModal()">
			Portfolio erstellen
		</button>
	</header>

	<app-create-portfolio-modal
		*ngIf="showCreateModal"
		(close)="closeCreateModal()"
		(created)="handlePortfolioCreated($event)">
	</app-create-portfolio-modal>

	<app-rename-portfolio-modal
		*ngIf="showRenameModal && renameTarget"
		[currentName]="renameTarget?.name ?? ''"
		[saving]="renameSaving"
		[serverError]="renameServerError"
		(close)="closeRenameModal()"
		(save)="saveRename($event)">
	</app-rename-portfolio-modal>

	<div class="state" *ngIf="isLoading">Portfolios werden geladen ...</div>
	<div class="state error" *ngIf="!isLoading && error">{{ error }}</div>
	<div class="state state-empty" *ngIf="!isLoading && !error && portfolios.length === 0">
		Noch keine Portfolios vorhanden. Erstelle jetzt dein erstes Portfolio!
	</div>

	<div class="portfolio-grid" *ngIf="!isLoading && !error && portfolios.length > 0">
		<app-portfolio-placeholder
			*ngFor="let portfolio of portfolios"
			[portfolio]="portfolio"
			[renaming]="renameSaving && renameTarget?.id === portfolio.id"
			[deleting]="isDeleting(portfolio.id)"
			(open)="openPortfolio($event)"
			(rename)="requestRename(portfolio)"
			(delete)="handleDelete(portfolio)">
		</app-portfolio-placeholder>
	</div>
</section>
